<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mubasic</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #121212;
            color: #b3b3b3;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .container {
            background-color: #1f1f1f;
            border-radius: 1rem;
            margin: 2rem auto;
            padding: 1.5rem;
            max-width: 95%;
            box-shadow: 0 4px 60px rgba(0,0,0,0.5);
        }
        .song-card {
            background-color: #181818;
            border-radius: 0.5rem;
            padding: 1rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .song-card:hover {
            background-color: #282828;
            transform: translateY(-5px);
        }
        .song-card:hover .play-overlay {
            opacity: 1;
            transform: translateY(0);
        }
        .play-overlay {
            position: absolute;
            bottom: 1.5rem;
            right: 1.5rem;
            width: 3.5rem;
            height: 3.5rem;
            background-color: #1db954;
            color: #121212;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }
        .play-overlay:hover {
            transform: scale(1.1) translateY(0);
        }
        .admin-btn {
            background-color: #1db954;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 700;
            letter-spacing: 0.05em;
            transition: background-color 0.3s ease;
        }
        .admin-btn:hover {
            background-color: #1ed760;
        }
        .tab-btn {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: color 0.3s ease, background-color 0.3s ease;
        }
        .tab-btn.active {
            color: white;
            background-color: #282828;
        }
        .player-bar {
            background-color: #181818;
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.4);
            z-index: 10;
        }
        /* Style for the scrollbar to match the dark theme */
        ::-webkit-scrollbar {
            width: 12px;
        }
        ::-webkit-scrollbar-track {
            background: #121212;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #535353;
            border-radius: 6px;
            border: 3px solid #121212;
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #6d6d6d;
        }
    </style>
</head>
<body class="bg-black text-white flex flex-col min-h-screen">
    <main class="flex-1">
        <div id="app" class="container w-full max-w-6xl p-4 sm:p-8 md:p-12">
            <!-- Message Box -->
            <div id="message-box" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden items-center justify-center z-50">
                <div class="bg-gray-800 rounded-lg p-6 max-w-sm mx-auto shadow-2xl">
                    <p id="message-text" class="text-white text-center mb-4"></p>
                    <button onclick="hideMessage()" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">Kapat</button>
                </div>
            </div>

            <!-- Home Screen -->
            <div id="home-screen" class="space-y-8">
                <header class="flex flex-col sm:flex-row justify-between items-center mb-8">
                    <h1 class="text-4xl sm:text-5xl font-extrabold text-white mb-4 sm:mb-0">Mubasic</h1>
                </header>
                
                <!-- Tab Navigation -->
                <div class="flex items-center space-x-4 mb-8">
                    <button id="tab-all-songs" onclick="showTab('all-songs')" class="tab-btn active">Tüm Şarkılar</button>
                    <button id="tab-favorites" onclick="showTab('favorites')" class="tab-btn">Favoriler</button>
                    <button id="tab-downloads" onclick="showTab('downloads')" class="tab-btn">İndirilenler</button>
                </div>
                
                <!-- Content Sections -->
                <div id="content-all-songs" class="tab-content">
                    <div id="song-list" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 sm:gap-6">
                        <!-- Müzikler buraya JavaScript ile eklenecek -->
                    </div>
                    <div id="empty-message" class="text-center text-gray-500 text-lg mt-8 hidden">
                        Henüz hiç müzik eklenmedi. Yönetici panelinden eklemeye başlayın!
                    </div>
                </div>

                <div id="content-favorites" class="tab-content hidden">
                    <div id="favorites-list" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 sm:gap-6">
                        <!-- Favori şarkılar buraya eklenecek -->
                    </div>
                    <div id="empty-favorites-message" class="text-center text-gray-500 text-lg mt-8 hidden">
                        Favori şarkınız yok. Birkaç tane ekleyin!
                    </div>
                </div>

                <div id="content-downloads" class="tab-content hidden">
                    <div id="downloads-list" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 sm:gap-6">
                        <!-- İndirilen şarkılar buraya eklenecek -->
                    </div>
                    <div id="empty-downloads-message" class="text-center text-gray-500 text-lg mt-8 hidden">
                        İndirilen şarkınız yok. Birkaç tane indirin!
                    </div>
                </div>

                <!-- Admin link -->
                <div class="mt-12 text-center">
                    <button onclick="showAdminLogin()" class="text-gray-400 hover:text-white transition-colors text-sm underline">Yönetici Girişi</button>
                </div>
            </div>

            <!-- Admin Login Screen -->
            <div id="admin-login-screen" class="hidden flex-col items-center justify-center p-8 space-y-6">
                <h2 class="text-4xl font-bold text-white">Yönetici Girişi</h2>
                <form id="login-form" class="w-full max-w-sm space-y-4">
                    <input type="password" id="admin-password" placeholder="Şifre" class="w-full p-4 rounded-lg border-2 border-gray-700 bg-gray-800 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all">
                    <button type="submit" class="w-full admin-btn">Giriş Yap</button>
                </form>
                <button onclick="showHome()" class="text-gray-400 hover:text-white transition-colors">Ana Sayfaya Dön</button>
            </div>

            <!-- Admin Panel Screen -->
            <div id="admin-panel-screen" class="hidden space-y-6">
                <header class="flex justify-between items-center mb-6">
                    <h2 class="text-4xl font-bold text-white">Yönetici Paneli</h2>
                    <button onclick="logout()" class="text-sm text-red-400 hover:text-red-600 font-medium">Çıkış Yap</button>
                </header>
                
                <form id="upload-form" class="bg-gray-800 p-6 rounded-xl space-y-4 shadow-inner">
                    <h3 class="text-xl font-semibold text-white">Yeni Şarkı Ekle</h3>
                    <input type="text" id="song-title" placeholder="Şarkı Adı" class="w-full p-3 rounded-lg border-2 border-gray-700 bg-gray-900 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all">
                    <input type="text" id="song-artist" placeholder="Sanatçı Adı" class="w-full p-3 rounded-lg border-2 border-gray-700 bg-gray-900 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all">
                    <input type="url" id="song-url" placeholder="Müzik URL'si (mp3, wav vb.)" class="w-full p-3 rounded-lg border-2 border-gray-700 bg-gray-900 text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all">
                    <button type="submit" class="w-full admin-btn">Şarkıyı Ekle</button>
                </form>
                
                <div class="p-6 bg-gray-800 rounded-xl shadow-md">
                    <h3 class="text-xl font-semibold text-white mb-4">Mevcut Şarkılar</h3>
                    <ul id="admin-song-list" class="space-y-4">
                        <!-- Şarkı listesi buraya gelecek -->
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Music Player -->
    <footer id="music-player-container" class="player-bar fixed bottom-0 left-0 right-0 p-4 md:p-6 hidden">
        <div class="flex flex-col md:flex-row items-center justify-between max-w-6xl mx-auto space-y-4 md:space-y-0 md:space-x-8">
            <div class="flex items-center space-x-4 w-full md:w-auto">
                <button id="play-pause-btn" class="bg-white rounded-full w-12 h-12 flex items-center justify-center transition-transform hover:scale-110">
                    <i id="player-play-icon" class="fas fa-play text-black text-xl"></i>
                    <i id="player-pause-icon" class="fas fa-pause text-black text-xl hidden"></i>
                </button>
                <div class="flex-1 min-w-0">
                    <p id="player-title" class="text-lg font-medium text-white truncate">Şarkı Seçilmedi</p>
                    <p id="player-artist" class="text-sm text-gray-400 truncate">--</p>
                </div>
            </div>
            <div id="download-player-btn-container" class="w-full md:w-auto">
                <!-- Download button will be injected here -->
            </div>
        </div>
    </footer>

    <script>
        // Data for this simulation. A real app would use a database.
        let songs = JSON.parse(localStorage.getItem('mubasic_songs')) || [];
        let favorites = JSON.parse(localStorage.getItem('mubasic_favorites')) || [];
        let downloads = JSON.parse(localStorage.getItem('mubasic_downloads')) || [];
        let nextSongId = songs.length > 0 ? Math.max(...songs.map(s => s.id)) + 1 : 1;

        // Elements
        const homeScreen = document.getElementById('home-screen');
        const adminLoginScreen = document.getElementById('admin-login-screen');
        const adminPanelScreen = document.getElementById('admin-panel-screen');
        const loginForm = document.getElementById('login-form');
        const uploadForm = document.getElementById('upload-form');
        const songList = document.getElementById('song-list');
        const favoritesList = document.getElementById('favorites-list');
        const downloadsList = document.getElementById('downloads-list');
        const adminSongList = document.getElementById('admin-song-list');
        const emptyMessage = document.getElementById('empty-message');
        const emptyFavoritesMessage = document.getElementById('empty-favorites-message');
        const emptyDownloadsMessage = document.getElementById('empty-downloads-message');
        const musicPlayerContainer = document.getElementById('music-player-container');
        const audioPlayer = document.getElementById('audio-player');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playerPlayIcon = document.getElementById('player-play-icon');
        const playerPauseIcon = document.getElementById('player-pause-icon');
        const playerTitle = document.getElementById('player-title');
        const playerArtist = document.getElementById('player-artist');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');
        const downloadPlayerBtnContainer = document.getElementById('download-player-btn-container');

        // State variables
        let isLoggedIn = false;
        let currentSong = null;
        let activeTab = 'all-songs';

        // --- View Management ---
        function showScreen(screen) {
            homeScreen.classList.add('hidden');
            adminLoginScreen.classList.add('hidden');
            adminPanelScreen.classList.add('hidden');
            screen.classList.remove('hidden');
            screen.classList.add('flex');
        }

        function showHome() {
            showScreen(homeScreen);
            showTab(activeTab);
        }

        function showAdminLogin() {
            showScreen(adminLoginScreen);
        }

        function showAdminPanel() {
            if (isLoggedIn) {
                showScreen(adminPanelScreen);
                renderAdminSongList();
            } else {
                showMessage("Lütfen önce giriş yapın.");
                showAdminLogin();
            }
        }
        
        function showTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`tab-${tabId}`).classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
            document.getElementById(`content-${tabId}`).classList.remove('hidden');
            
            activeTab = tabId;
            if (tabId === 'all-songs') renderSongList();
            if (tabId === 'favorites') renderFavorites();
            if (tabId === 'downloads') renderDownloads();
        }

        function showMessage(message) {
            messageText.innerText = message;
            messageBox.classList.remove('hidden');
            messageBox.classList.add('flex');
        }

        function hideMessage() {
            messageBox.classList.add('hidden');
            messageBox.classList.remove('flex');
        }
        
        // --- Persistence Functions ---
        function saveToLocalStorage() {
            localStorage.setItem('mubasic_songs', JSON.stringify(songs));
            localStorage.setItem('mubasic_favorites', JSON.stringify(favorites));
            localStorage.setItem('mubasic_downloads', JSON.stringify(downloads));
        }

        // --- Rendering Functions ---
        function renderSongList() {
            songList.innerHTML = '';
            if (songs.length === 0) {
                emptyMessage.classList.remove('hidden');
            } else {
                emptyMessage.classList.add('hidden');
            }

            songs.forEach(song => {
                const songEl = document.createElement('div');
                songEl.className = 'song-card flex flex-col items-center justify-between space-y-4';
                songEl.innerHTML = `
                    <div class="relative w-full aspect-square bg-gray-700 rounded-lg flex items-center justify-center">
                        <i class="fas fa-music text-4xl text-gray-500"></i>
                        <button onclick="playSong(${song.id})" class="play-overlay">
                            <i class="fas fa-play text-2xl"></i>
                        </button>
                    </div>
                    <div class="w-full text-center">
                        <h4 class="text-lg font-medium text-white truncate">${song.title}</h4>
                        <p class="text-sm text-gray-400 truncate">${song.artist}</p>
                    </div>
                    <div class="flex items-center justify-center w-full mt-2 space-x-2">
                        <button onclick="addFavorite(${song.id})" class="text-gray-400 hover:text-red-500 transition-colors">
                            <i class="fas fa-heart"></i> Favoriye Ekle
                        </button>
                        <a href="${song.audioUrl}" onclick="addToDownloads(${song.id})" download="${song.title} - ${song.artist}.mp3" class="download-btn text-xs sm:text-sm">
                            <i class="fas fa-download"></i> İndir
                        </a>
                    </div>
                `;
                songList.appendChild(songEl);
            });
        }

        function renderAdminSongList() {
            adminSongList.innerHTML = '';
            if (songs.length === 0) {
                adminSongList.innerHTML = '<li class="text-gray-500 text-center">Henüz eklenmiş müzik yok.</li>';
            }
            songs.forEach(song => {
                const li = document.createElement('li');
                li.className = 'flex items-center justify-between p-4 bg-gray-700 rounded-lg';
                li.innerHTML = `
                    <div>
                        <p class="font-semibold text-white">${song.title}</p>
                        <p class="text-sm text-gray-400">${song.artist}</p>
                    </div>
                    <button onclick="deleteSong(${song.id})" class="text-red-400 hover:text-red-600 font-medium">
                        <i class="fas fa-trash"></i> Sil
                    </button>
                `;
                adminSongList.appendChild(li);
            });
        }
        
        function renderFavorites() {
            favoritesList.innerHTML = '';
            if (favorites.length === 0) {
                emptyFavoritesMessage.classList.remove('hidden');
            } else {
                emptyFavoritesMessage.classList.add('hidden');
                favorites.forEach(song => {
                    const songEl = document.createElement('div');
                    songEl.className = 'song-card flex flex-col items-center justify-between space-y-4';
                    songEl.innerHTML = `
                        <div class="relative w-full aspect-square bg-gray-700 rounded-lg flex items-center justify-center">
                            <i class="fas fa-heart text-4xl text-gray-500"></i>
                            <button onclick="playSong(${song.id})" class="play-overlay">
                                <i class="fas fa-play text-2xl"></i>
                            </button>
                        </div>
                        <div class="w-full text-center">
                            <h4 class="text-lg font-medium text-white truncate">${song.title}</h4>
                            <p class="text-sm text-gray-400 truncate">${song.artist}</p>
                        </div>
                    `;
                    favoritesList.appendChild(songEl);
                });
            }
        }
        
        function renderDownloads() {
            downloadsList.innerHTML = '';
            if (downloads.length === 0) {
                emptyDownloadsMessage.classList.remove('hidden');
            } else {
                emptyDownloadsMessage.classList.add('hidden');
                downloads.forEach(song => {
                    const songEl = document.createElement('div');
                    songEl.className = 'song-card flex flex-col items-center justify-between space-y-4';
                    songEl.innerHTML = `
                        <div class="relative w-full aspect-square bg-gray-700 rounded-lg flex items-center justify-center">
                            <i class="fas fa-arrow-down text-4xl text-gray-500"></i>
                            <button onclick="playSong(${song.id})" class="play-overlay">
                                <i class="fas fa-play text-2xl"></i>
                            </button>
                        </div>
                        <div class="w-full text-center">
                            <h4 class="text-lg font-medium text-white truncate">${song.title}</h4>
                            <p class="text-sm text-gray-400 truncate">${song.artist}</p>
                        </div>
                    `;
                    downloadsList.appendChild(songEl);
                });
            }
        }

        function updatePlayerUI() {
            if (currentSong) {
                playerTitle.innerText = currentSong.title;
                playerArtist.innerText = currentSong.artist;
                musicPlayerContainer.classList.remove('hidden');
            } else {
                musicPlayerContainer.classList.add('hidden');
            }
        }

        // --- Core Logic ---
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const password = document.getElementById('admin-password').value;
            // Hardcoded password for simulation. Not secure.
            if (password === '1975') {
                isLoggedIn = true;
                showAdminPanel();
            } else {
                showMessage("Yanlış şifre. Lütfen tekrar deneyin.");
            }
        });

        uploadForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('song-title').value.trim();
            const artist = document.getElementById('song-artist').value.trim();
            const url = document.getElementById('song-url').value.trim();

            if (title && artist && url) {
                // This simulates adding a song. A real app would use a database.
                songs.push({
                    id: nextSongId++,
                    title,
                    artist,
                    audioUrl: url
                });
                showMessage(`"${title}" başarıyla eklendi.`);
                document.getElementById('song-title').value = '';
                document.getElementById('song-artist').value = '';
                document.getElementById('song-url').value = '';
                saveToLocalStorage();
                renderAdminSongList();
                showTab('all-songs');
            } else {
                showMessage("Lütfen tüm alanları doldurun.");
            }
        });

        function logout() {
            isLoggedIn = false;
            showMessage("Güvenli çıkış yapıldı.");
            showHome();
        }

        function playSong(id) {
            const song = songs.find(s => s.id === id);
            if (song) {
                if (currentSong && currentSong.id === song.id && !audioPlayer.paused) {
                    audioPlayer.pause();
                } else {
                    currentSong = song;
                    audioPlayer.src = song.audioUrl;
                    audioPlayer.play();
                }
                updatePlayerUI();
            }
        }
        
        playPauseBtn.addEventListener('click', () => {
            if (currentSong) {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                } else {
                    audioPlayer.pause();
                }
            } else {
                showMessage("Önce bir şarkı seçin.");
            }
        });
        
        // Müzik çalar durum değişikliklerini takip et
        audioPlayer.addEventListener('play', () => {
            playerPlayIcon.classList.add('hidden');
            playerPauseIcon.classList.remove('hidden');
        });
        audioPlayer.addEventListener('pause', () => {
            playerPlayIcon.classList.remove('hidden');
            playerPauseIcon.classList.add('hidden');
        });
        audioPlayer.addEventListener('ended', () => {
            playerPlayIcon.classList.remove('hidden');
            playerPauseIcon.classList.add('hidden');
        });

        function deleteSong(id) {
            // This simulates deleting a song.
            songs = songs.filter(s => s.id !== id);
            favorites = favorites.filter(s => s.id !== id);
            downloads = downloads.filter(s => s.id !== id);
            if (currentSong && currentSong.id === id) {
                audioPlayer.pause();
                currentSong = null;
                updatePlayerUI();
            }
            showMessage("Şarkı silindi.");
            saveToLocalStorage();
            renderAdminSongList();
            renderSongList();
            renderFavorites();
            renderDownloads();
        }
        
        function addFavorite(id) {
            const song = songs.find(s => s.id === id);
            if (song && !favorites.some(f => f.id === id)) {
                favorites.push(song);
                showMessage(`"${song.title}" favorilere eklendi.`);
                saveToLocalStorage();
                renderFavorites();
            } else {
                showMessage("Bu şarkı zaten favorilerde.");
            }
        }
        
        function addToDownloads(id) {
            const song = songs.find(s => s.id === id);
            if (song && !downloads.some(d => d.id === id)) {
                downloads.push(song);
                showMessage(`"${song.title}" indirme listenize eklendi.`);
                saveToLocalStorage();
                renderDownloads();
            }
        }

        // Initial render on page load
        showHome();
    </script>
</body>
</html>
